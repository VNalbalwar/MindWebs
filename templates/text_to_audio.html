<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Audio Converter</title>
    <link rel="stylesheet" href="/static/preloader.css">
    <link rel="stylesheet" href="/static/text_to_audio.css">
    <link rel="shortcut icon" type="image/jpg" href="/static/bootstrap_images/favicon.png" />
</head>

<body>
    <div id="preloader"></div>
    <br>
    <header>
        <p class="centered-text">Text to Audio Converter</p>
    </header>
    <div class="wrapper">
        <form action="/text_to_audio" method="post">
            <label for="text">Your Statements : </label><br>
            <textarea name="text" placeholder="Enter text here..." id="text"></textarea><br>
            <div class="btnArea">
                <button type="submit" id="generateBtn">Audio</button>
                <button type="reset" id="resetBtn">Reset</button><br>
            </div>
        </form>

        <div id="player">
            <audio controls id="audio">
                <source src="" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        </div>
    </div>
    <script>
        document.querySelector('form').addEventListener('submit', function (e) {
            e.preventDefault();
            var text = document.getElementById('text').value;
            fetch('/text_to_audio', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: 'text=' + encodeURIComponent(text)
            })
                .then(response => response.blob())
                .then(blob => {
                    var url = URL.createObjectURL(blob);
                    var audio = document.getElementById('audio');
                    audio.src = url;
                    // audio.style.display = 'block';
                });
        });
    </script>
    <script>
        const textarea = document.querySelector("textarea");
        textarea.addEventListener("keyup", e => {
            let scHeight = e.target.scrollHeight;
            textarea.style.height = "63px";
            textarea.style.height = `${scHeight}px`;
        });  
    </script>
    <script src="/static/preloader.js"></script>
</body>

</html>